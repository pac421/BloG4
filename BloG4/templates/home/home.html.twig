{% extends 'base.html.twig' %}

{% block title %}Fil d'actualités{% endblock %}

{% block body %}

<!--
Array required to display this template:
data_home
	user
		id
		name
		lst_roles
	lst_category
		id
		name
	lst_fiches
		id
		title
		image
		content
		nb_comments
		date
			sortable
			visual
		user
			id
			name
		lst_categories
			id
			name
		lst_comments
			id
			content
			date
				sortable
				visual
			user
				id
				name
-->

<div>
	<!-- Navbar -->
	<nav class="mb-0 navbar navbar-expand-lg navbar-dark primary-color sticky-top">
		<a class="navbar-brand" href="#">BloG4</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#div_navbar_collapse" aria-controls="div_navbar_collapse" aria-expanded="false" aria-label="Ouvrir/fermer">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="div_navbar_collapse">
			<ul class="navbar-nav ml-auto">
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" id="a_navbar_dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<i class="fas fa-user"></i> {{ data_home.user.name }}
					</a>
					<div class="dropdown-menu dropdown-menu-right dropdown-info" aria-labelledby="a_navbar_dropdown">
						<a class="dropdown-item" href="{{ path('profil', {'id':app.user.id('id')}) }}">Mon profil</a>
						<a class="dropdown-item" href="{{ path('app_logout')}}">Déconnexion</a>
					</div>
				</li>
			</ul>
		</div>
	</nav>
	<!-- /Navbar -->
	
	<div class="row w-100">
		<div class="col-2 border-right border-primary z-depth-1-half position-fixed h-100">
			
			<!-- Search -->
			<form class="form-inline d-flex justify-content-center md-form form-sm mt-3">
				<i class="fas fa-search" aria-hidden="true"></i>
				<input class="form-control form-control-sm ml-3 w-75" type="text" placeholder="Rechercher un mot-clé" aria-label="Recherche" id='home_search'>
			</form>
			<!-- /Search -->
			
			<!-- Categories -->
			<div class='input-group flex-column'>
				<div class='ml-3 border-bottom border-grey mb-3'>
					<h5>
						Catégories
						<span class='float-right'>
							<a id="home_check_all_categories" title="Cocher toutes les catégories">
								<i class='far fa-check-square'></i>
							</a>
							&nbsp;|&nbsp;
							<a id="home_uncheck_all_categories" title="Décocher toutes les catégories">
								<i class='far fa-square'></i>
							</a>
						</span>
					</h5>
				</div>
				
				{% for category in data_home.lst_categories %}
				<div class="form-check">
					<input type="checkbox" class="form-check-input home_input_categorie" id="home_input_categorie_{{ category.id }}" onclick='load_articles()' value='{{ category.id }}' checked>
					<label class="form-check-label" for="home_input_categorie_{{ category.id }}">{{ category.label }}</label>
				</div>
				{% endfor %}
				
			</div>
			<!-- /Categories -->
		</div>
		
		<div class="col-10" id="div_home_fil_actualite">
			
			<div class="m-4">
				<section class="dark-grey-text">
					
					<div class="mb-5">
						<div class="d-flex justify-content-between align-items-center">
							<h2 class="font-weight-bold"><i class="fa fa-newspaper mr-2"></i>Fil d'actualités</h2>
							
							<!-- Material checked -->
							<div class="switch">
								<label>
									Date croissant
									<input type="checkbox" id='home_order_date' class="primary-color" onclick='load_articles()' checked><span class="lever"></span> 
									Date décroissant
								</label>
							</div>
							
							<form action= "{{path('newFiche')}}" methode= "post">
							<button class="btn btn-primary"><i class='fa fa-plus-square mr-2'></i>Publier une fiche</button>
							</form>
						</div>
					</div>
					
					<div id='home_div_articles' class='d-flex flex-column'></div>

				</section>
			</div>
		</div>
	</div>
</div>

<!-- Footer --
<footer class="page-footer font-small primary-color position-relative z-depth-1-half">
	<div class="footer-copyright text-center py-3">© 2020
		<a href="#"> BloG4</a>
	</div>
</footer>
<!-- Footer -->

<script type='text/javascript'>
var data_home = {{ data_home|json_encode|raw }};
</script>

{% endblock %}


